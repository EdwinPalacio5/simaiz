{% extends "base.html" %}

{% block contenido %}
    <h2 class="text-center">Configurar Parametros de Simulacion</h2>
    <hr style= "border: 1px solid #f00">  

    <!-- Formulario para modificar precio-->
    <form method = "post">
    	{% csrf_token %}
        <div class="container">
        	<div class="row">
                <div class="col-sm-6">
                    <label for="{{contexto.configuraciones.precio_maiz.name}}">
                        {{contexto.configuraciones.precio_maiz.label}}
                    </label>
                    {{contexto.configuraciones.precio_maiz}}
                </div>
                <div class="col-sm-6">
                    <label for="{{contexto.configuraciones.unidadMedidaMaiz.name}}">
                         {{contexto.configuraciones.unidadMedidaMaiz.label}}
                    </label>
                    {{contexto.configuraciones.unidadMedidaMaiz}}
                </div>
            </div>
        </div>
        <br>
        <div class="container">
            <div class= "row">
                <div class="col-sm-12" >
                   <button type="submit" class="btn btn-success btn-block" name="btnForm1">Guardar Cambios</button> 
                </div>
            </div>     
        </div>
    </form>
    
    <hr style= "border: 1px solid #f00">
    

        <!-- Formulario para Crear Fertilizante-->
        <form method = "post">
        	{% csrf_token %}
        	<div class="container">
                <div class="row">
                    <div class="col-sm-4">
                        <label for="{{contexto.fertilizantes.nombre_fertilizante.name}}">
                            {{contexto.fertilizantes.nombre_fertilizante.label}}
                        </label>
                        {{contexto.fertilizantes.nombre_fertilizante}}
                    </div>
                    <div class="col-sm-2">
                        <label for="{{contexto.fertilizantes.porc_nitrogeno.name}}">
                            {{contexto.fertilizantes.porc_nitrogeno.label}}
                        </label>
                        {{contexto.fertilizantes.porc_nitrogeno}}
                    </div>
                    <div class="col-sm-2">
                        <label for="{{contexto.fertilizantes.porc_fosforo.name}}">
                            {{contexto.fertilizantes.porc_fosforo.label}}
                        </label>
                        {{contexto.fertilizantes.porc_fosforo}}
                    </div>
                     <div class="col-sm-2">
                        <label for="{{contexto.fertilizantes.porc_potasio.name}}">
                            {{contexto.fertilizantes.porc_potasio.label}}
                        </label>
                        {{contexto.fertilizantes.porc_potasio}}
                    </div>
                     <div class="col-sm-1">
                        <label for="{{contexto.fertilizantes.peso.name}}">
                            {{contexto.fertilizantes.peso.label}}
                        </label>
                        {{contexto.fertilizantes.peso}}
                    </div>
                    <div class="col-sm-1.5">
                        <label for="{{contexto.fertilizantes.unidadMedidaFert.name}}">
                             {{contexto.fertilizantes.unidadMedidaFert.label}}
                        </label>
                        {{contexto.fertilizantes.unidadMedidaFert}}
                    </div>
                </div>
            </div>
            <br>
            <div class="container">
                <div class= "row">
                    <div class="col-sm-12">
                        {%if contexto.hayConfi  %}
                       <button type="submit" class="btn btn-success btn-block" name="btnForm2" > Guardar Nuevo Fertilizante</button>
                       {% else %}
                       <button type="submit" class="btn btn-success btn-block" name="btnForm2" disabled=""> Guardar Nuevo Fertilizante</button>
                        {%endif%}
                    </div>
                </div>     
            </div>
    </form>

    
    <hr style= "border: 1px solid #f00">
    <h2>{{contexto.prueba}}</h2>
    <!-- Se muestran fertilizantes y se ofrece las opciones editar y eliminar-->
    {% if contexto.fertUsuarios %}
        <table class="table table-bordered">
            <thead>
                <tr>
                    <td>Nombre Fertilizante</td>
                    <td>Nitrogeno (%)</td>
                    <td>Fosforo (%)</td>
                    <td>Potasio (%)</td>
                    <td>Peso</td>
                    <td>Unidad de Medida</td>
                    <td>Acciones</td>
                </tr>
            </thead>
            <tbody>
                {% for fer in contexto.listaFert %}
                    <tr>
                    <td>{{fer.0.nombre_fertilizante}}</td>
                    <td>{{fer.0.porc_nitrogeno}}</td>
                    <td>{{fer.0.porc_fosforo}}</td>
                    <td>{{fer.0.porc_potasio}}</td>
                    <td>{{fer.0.peso}}</td>
                    <td>{{fer.0.unidadMedidaFert}}</td>
                    <td>
                        
                        <a class="btn btn-primary" data-toggle = "modal"  href="#f{{forloop.counter}}" > Editar</a>
                        <a class="btn btn-danger" data-toggle = "modal"  href="#{{fer.0.id}}" > Eliminar</a>
                    </td>
                    <div class="modal fade" id="{{fer.0.id}}">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <!-- Header de ventana-->
                                <div class="modal-header">
                                    <h2 class="modal-title">Eliminar Fertilizante</h2>
                                    <button tyle="button" class="close" data-dismiss="modal" aria-hidden = "true">&times;</button>
                                </div>
                                <!-- Contenido de la ventana -->
                                <div class="modal-body">
                                    <form method="POST">
                                        {% csrf_token %}
                                        <h3>Â¿Desea eliminar el registro?</h3>                                       
                                        <input type="hidden" name="inputEliminar" value= "{{fer.0.id}}">
                                        <button type="submit" class="btn btn-danger " name="btnForm4">Eliminar</button>
                                        <button type="button" class="btn btn-primary" data-dismiss= "modal" name="btnForm4">Cancelar</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal fade" id="f{{forloop.counter}}">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <!-- Header de ventana-->
                                <div class="modal-header">
                                    <h2 class="modal-title">Modificar Fertilizante</h2>
                                    <button tyle="button" class="close" data-dismiss="modal" aria-hidden = "true">&times;</button>
                                </div>
                                <!-- Contenido de la ventana -->
                                <div class="modal-body">
                                    <form method="POST">
                                        {% csrf_token %}
                                        {{fer.1.as_p}}
                                        <input type="hidden" name="inputEditar" value= "{{fer.0.id}}">
                                        <button type="submit" class="btn btn-success btn-block" name="btnEditarFert">Guardar Cambios</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    </tr>
                {% endfor%}
            </tbody>
        </table>
    {% else %}
        <h3 class="text-center">No ha agregado fertilizantes</h3>
    {% endif %}

    <!-- Ventanas emergentes -->
    


{% endblock contenido %}

















